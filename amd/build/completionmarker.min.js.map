{"version":3,"sources":["../src/completionmarker.js"],"names":["define","$","init","label_completed","label_uncompleted","markButton","form","formurl","attr","onSuccessMark","input","find","val","html","location","reload","onErrorMark","addClass","click","e","preventDefault","ajax","data","serialize","success","error"],"mappings":"AAAAA,OAAM,yCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAC3B,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAA2BC,CAA3B,CAA8C,IAC5CC,CAAAA,CAAU,CAAGJ,CAAC,CAAC,mCAAD,CAD8B,CAE5CK,CAAI,CAAGL,CAAC,CAAC,kDAAD,CAFoC,CAG5CM,CAAO,CAAGD,CAAI,CAACE,IAAL,CAAU,QAAV,CAHkC,CAI5CC,CAAa,CAAG,UAAU,CAC1B,GAAIC,CAAAA,CAAK,CAAGJ,CAAI,CAACK,IAAL,CAAU,+BAAV,CAAZ,CAEA,GAAkB,CAAf,EAAAD,CAAK,CAACE,GAAN,EAAH,CAAoB,CAChBP,CAAU,CAACQ,IAAX,CAAgBV,CAAhB,EACAO,CAAK,CAACE,GAAN,CAAU,CAAV,CACH,CAHD,IAGK,CACDP,CAAU,CAACQ,IAAX,CAAgBT,CAAhB,EACAM,CAAK,CAACE,GAAN,CAAU,CAAV,CACH,CACDE,QAAQ,CAACC,MAAT,IACH,CAf+C,CAiB5CC,CAAW,CAAG,UAAU,CACxBX,CAAU,CAACY,QAAX,CAAoB,QAApB,CACH,CAnB+C,CAqBhDhB,CAAC,CAAC,mCAAD,CAAD,CAAuCiB,KAAvC,CAA6C,SAASC,CAAT,CAAW,CACpDA,CAAC,CAACC,cAAF,GACAnB,CAAC,CAACoB,IAAF,CAAOd,CAAP,CAAgB,CACZe,IAAI,CAAEhB,CAAI,CAACiB,SAAL,EADM,CAEZC,OAAO,CAAEf,CAFG,CAGZgB,KAAK,CAAET,CAHK,CAAhB,CAKH,CAPD,CAQH,CA9BE,CAgCV,CAjCK,CAAN","sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function (label_completed, label_uncompleted) {\n            var markButton = $(\".activity.completionmarker a.mark\");\n            var form = $(\".activity.completionmarker form.togglecompletion\");\n            var formurl = form.attr(\"action\");\n            var onSuccessMark = function(){\n                var input = form.find(\"input[name=\\'completionstate\\']\");\n\n                if(input.val() == 1){\n                    markButton.html(label_completed);\n                    input.val(0);\n                }else{\n                    markButton.html(label_uncompleted);\n                    input.val(1);\n                }\n                location.reload(true);\n            };\n\n            var onErrorMark = function(){\n                markButton.addClass(\"danger\");\n            };\n\n            $(\".activity.completionmarker a.mark\").click(function(e){\n                e.preventDefault();\n                $.ajax(formurl, {\n                    data: form.serialize(),\n                    success: onSuccessMark,\n                    error: onErrorMark\n                });\n            });\n        }\n    };\n});\n"],"file":"completionmarker.min.js"}